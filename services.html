<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Services — Kplus712</title>
  <meta name="theme-color" content="#D4AF37">
  <style>
    :root{--gold:#D4AF37;--bg:#fff;--muted:#666;--maxw:1100px}
    body{font-family:Inter, Poppins, system-ui, Arial; margin:0; background:var(--bg); color:#111}
    nav{background:#fff;border-bottom:1px solid #eee;padding:.6rem 1rem;position:sticky;top:0;z-index:50}
    nav .inner{max-width:var(--maxw);margin:0 auto;display:flex;align-items:center;justify-content:space-between}
    nav a{color:var(--gold);text-decoration:none;margin-left:1rem;font-weight:600}
    header{max-width:var(--maxw);margin:1.5rem auto;padding:1.25rem;text-align:center}
    header h1{color:var(--gold);margin:0;font-size:1.9rem}
    header p{color:var(--muted);margin:.6rem 0 0}

    .container{max-width:var(--maxw);margin:1rem auto;padding:1rem}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:1rem}
    @media(max-width:900px){.grid{grid-template-columns:1fr} .aside{order:2}}

    /* services list */
    .service-card{background:#fff;border-radius:10px;padding:1rem;border:1px solid rgba(0,0,0,0.04);box-shadow:0 8px 24px rgba(10,10,10,0.04);margin-bottom:1rem}
    .service-card h3{color:var(--gold);margin:.2rem 0}
    .pill{display:inline-block;background:#fffbea;border:1px solid rgba(212,175,55,.2);padding:.35rem .6rem;border-radius:999px;font-weight:600;color:#6b4f00;margin-top:.6rem}

    /* assistant */
    .assistant{background:#fff;border-radius:10px;padding:1rem;border:1px solid rgba(0,0,0,0.04);box-shadow:0 8px 24px rgba(10,10,10,0.04)}
    .chat{height:420px;overflow:auto;padding:0.5rem;border-radius:8px;background:#fbfbfb;border:1px solid #f0f0f0}
    .msg{margin:.5rem 0;display:flex;gap:.6rem;align-items:flex-start}
    .msg.user{justify-content:flex-end}
    .bubble{max-width:78%;padding:.6rem .9rem;border-radius:12px;background:#fff;border:1px solid #eee}
    .bubble.user{background:var(--gold);color:white;border-color:rgba(0,0,0,0.06)}
    .chat-controls{display:flex;gap:.5rem;margin-top:.6rem}
    .chat-controls input{flex:1;padding:.7rem;border-radius:10px;border:1px solid #ddd}
    .btn{background:var(--gold);color:white;padding:.6rem .9rem;border-radius:8px;border:none;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--gold);border:1px solid var(--gold)}

    /* order form */
    .order-card{background:#fff;padding:1rem;border-radius:10px;border:1px solid rgba(0,0,0,0.04);margin-bottom:1rem}
    .order-card label{display:block;font-weight:600;margin:.6rem 0 .2rem}
    .order-card input,.order-card textarea,.order-card select{width:100%;padding:.6rem;border-radius:8px;border:1px solid #ddd}
    .small{font-size:.9rem;color:var(--muted)}

    .sync-row{display:flex;gap:.5rem;align-items:center;justify-content:space-between;margin-top:.8rem}
    .queued{background:#fff8e1;border-left:4px solid var(--gold);padding:.6rem;border-radius:6px;margin-top:.7rem}

    footer{max-width:var(--maxw);margin:2rem auto;padding:1rem;text-align:center;color:var(--muted)}
  </style>
</head>
<body>

<nav>
  <div class="inner">
    <div style="font-weight:700;color:var(--gold)">Kplus712</div>
    <div>
      <a href="index.html">Home</a>
      <a href="business-knowledge.html">Business Knowledge</a>
      <a href="about.html">About Us</a>
      <a href="contact.html">Contact</a>
      <a href="services.html">Services</a>
    </div>
  </div>
</nav>

<header>
  <h1>Our Services — Learn, Grow & Connect</h1>
  <p>Business education, mentorship and WhatsApp e-commerce — designed to work even when you're offline.</p>
</header>

<main class="container">
  <div class="grid">
    <!-- MAIN column -->
    <div>
      <!-- Hero / quick actions -->
      <div class="service-card">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap">
          <div>
            <h3>Business Education on WhatsApp</h3>
            <p class="small">Daily lessons, quick mentorship, micro-assignments and 1:1 guidance — delivered through WhatsApp chat.</p>
            <div style="margin-top:.6rem">
              <a class="btn" href="https://wa.me/255622266932?text=Hello%20Kelvinplus712!%20I%27m%20interested%20in%20Business%20Education" target="_blank">Join via WhatsApp</a>
              <button id="open-assistant" class="btn ghost" style="margin-left:.6rem">Ask the Business Assistant</button>
            </div>
          </div>
          <div style="min-width:160px">
            <div class="pill">WhatsApp-based</div>
            <div class="small" style="margin-top:.6rem">Phone: +255 622 266 932</div>
          </div>
        </div>
      </div>

      <!-- ecommerce / how it works -->
      <div class="service-card">
        <h3>WhatsApp eCommerce & Order Support</h3>
        <p class="small">Accept orders, request training packages, or book coaching — customers chat and you receive organized order details via WhatsApp.</p>

        <h4 style="margin-top:1rem;color:var(--gold)">How it works</h4>
        <ol style="margin-left:1rem">
          <li>Customer fills a short order/request form (works offline).</li>
          <li>Form saved locally and available to send when ready.</li>
          <li>Press <strong>Send to WhatsApp</strong> to open a prefilled message to our number.</li>
        </ol>
      </div>

      <!-- Order form -->
      <div class="order-card" id="order-area">
        <h3 style="color:var(--gold)">Place an Order / Request Education</h3>
        <div class="small">Fill the form — you can send it immediately to WhatsApp or save for later (offline friendly).</div>

        <label for="fullname">Full name</label>
        <input id="fullname" placeholder="Your name">

        <label for="whatservice">Service</label>
        <select id="whatservice">
          <option>Business Education (WhatsApp lessons)</option>
          <option>One-on-one Coaching</option>
          <option>Start an E-commerce shop</option>
          <option>Custom Training (specify below)</option>
        </select>

        <label for="details">Details / What do you want to learn / order?</label>
        <textarea id="details" rows="4" placeholder="E.g. I want lessons on marketing basics..."></textarea>

        <label for="phone">Phone (WhatsApp)</label>
        <input id="phone" placeholder="+255...">

        <div style="display:flex;gap:.6rem;margin-top:.6rem;flex-wrap:wrap">
          <button id="save-order" class="btn">Save Locally</button>
          <button id="send-whatsapp" class="btn">Send to WhatsApp</button>
          <button id="clear-form" class="btn ghost">Clear</button>
        </div>

        <div id="queued" style="margin-top:.8rem"></div>
      </div>

      <!-- FAQ / Assistant fallback -->
      <div class="service-card">
        <h3>Frequently asked (example)</h3>
        <ul>
          <li><strong>Q:</strong> How long are lessons? <br><span class="small">A: Short daily lessons — 10–15 minutes.</span></li>
          <li><strong>Q:</strong> How many sessions? <br><span class="small">A: We have flexible packages: 7-day, 30-day, or custom.</span></li>
        </ul>
      </div>
    </div>

    <!-- ASIDE (assistant + status) -->
    <aside class="aside">
      <div class="assistant">
        <h4 style="margin:.1rem 0;color:var(--gold)">Business Assistant</h4>
        <div id="chat" class="chat" aria-live="polite"></div>

        <div class="chat-controls">
          <input id="chat-input" placeholder="Ask a question (e.g. price of coaching)"/>
          <button id="send-chat" class="btn">Ask</button>
        </div>

        <div style="margin-top:.8rem;display:flex;gap:.5rem;align-items:center">
          <button id="sync-queued" class="btn ghost">Sync queued orders</button>
          <div id="sync-status" class="small" style="margin-left:auto;color:var(--muted)">Offline ready</div>
        </div>
      </div>

      <!-- quick contact card -->
      <div style="height:14px"></div>
      <div class="service-card" style="margin-top:10px">
        <h4 style="margin:.1rem 0;color:var(--gold)">Quick Contact</h4>
        <p class="small">Email: <a href="mailto:kelvinplus712@gmail.com">kelvinplus712@gmail.com</a></p>
        <p class="small">WhatsApp: <a href="https://wa.me/255622266932" target="_blank">+255 622 266 932</a></p>
      </div>
    </aside>
  </div>
</main>

<footer>
  <div style="max-width:var(--maxw);margin:0 auto;padding:1rem;text-align:center;color:var(--muted)">
    © 2025 Kplus712 — <a href="services.html">Services</a> • <a href="business-knowledge.html">Business Knowledge</a>
  </div>
</footer>

<!-- local logic -->
<script>
/* ===== Simple assistant data (expandable) ===== */
const assistantData = [
  {q:['price','cost','fee'], a:'Prices vary by package: micro-lessons (free preview), 7-day package (Tsh 1000), 30-day deep plan (Tsh 2000). Contact via WhatsApp to get exact pricing.'},
  {q:['how long','duration'], a:'Typical lessons: 10–15 minutes daily. Coaching sessions: 45–60 minutes.'},
  {q:['start','join','enroll'], a:'To join, press "Join via WhatsApp" and send us a message. We will reply with next steps.'},
  {q:['ecommerce','shop','sell'], a:'We help set up WhatsApp-based shops, product catalogs and order flows. Start by requesting "Start an E-commerce shop" in the order form.'},
  {q:['offline','work offline','cache'], a:'This platform saves orders locally so you can prepare requests while offline and send them when you have connectivity.'}
];

function fuzzyAnswer(text){
  const s = text.toLowerCase();
  for(const item of assistantData){
    for(const key of item.q){
      if(s.includes(key)) return item.a;
    }
  }
  return "I didn't find a direct answer — you can save your request and press 'Send to WhatsApp' to contact us directly.";
}

/* ===== Chat UI ===== */
const chat = document.getElementById('chat');
function addMessage(text, who='bot'){
  const el = document.createElement('div'); el.className = 'msg ' + (who==='user'?'user':'');
  const b = document.createElement('div'); b.className = 'bubble ' + (who==='user'?'user':''); b.innerText = text;
  el.appendChild(b); chat.appendChild(el); chat.scrollTop = chat.scrollHeight;
}
document.getElementById('send-chat').addEventListener('click', ()=> {
  const v = document.getElementById('chat-input').value.trim();
  if(!v) return;
  addMessage(v,'user'); document.getElementById('chat-input').value='';
  // simulate thinking
  setTimeout(()=> addMessage(fuzzyAnswer(v),'bot'), 500);
});
document.getElementById('chat-input').addEventListener('keydown',(e)=>{ if(e.key==='Enter'){ e.preventDefault(); document.getElementById('send-chat').click(); } });

/* ===== Order save / queue / whatsapp ===== */
const saveBtn = document.getElementById('save-order');
const sendBtn = document.getElementById('send-whatsapp');
const clearBtn = document.getElementById('clear-form');
const queuedDiv = document.getElementById('queued');

function getQueue(){ try{ return JSON.parse(localStorage.getItem('kplus_queue')||'[]') }catch(e){ return [] } }
function setQueue(q){ localStorage.setItem('kplus_queue', JSON.stringify(q)); renderQueue(); }

function renderQueue(){
  const q = getQueue();
  queuedDiv.innerHTML = '';
  if(q.length===0){ queuedDiv.innerHTML = '<div class="small">No saved requests.</div>'; return; }
  q.forEach((item, idx)=>{
    const d = document.createElement('div'); d.className='queued';
    d.innerHTML = `<strong>${item.name || 'Guest'}</strong> — <span class="small">${item.service}</span><div class="small" style="margin-top:6px">${item.details}</div>
    <div style="margin-top:.5rem"><button class="btn" onclick="sendQueueToWhatsApp(${idx})">Send to WhatsApp</button> <button class="btn ghost" onclick="deleteQueue(${idx})">Delete</button></div>`;
    queuedDiv.appendChild(d);
  });
}

function clearForm(){
  document.getElementById('fullname').value='';
  document.getElementById('whatservice').value='Business Education (WhatsApp lessons)';
  document.getElementById('details').value='';
  document.getElementById('phone').value='';
}
clearBtn.addEventListener('click', clearForm);

saveBtn.addEventListener('click', ()=>{
  const item = {
    name: document.getElementById('fullname').value.trim(),
    service: document.getElementById('whatservice').value,
    details: document.getElementById('details').value.trim(),
    phone: document.getElementById('phone').value.trim(),
    created: new Date().toISOString()
  };
  const q = getQueue(); q.push(item); setQueue(q);
  alert('Saved locally — you can send it to WhatsApp later.');
  clearForm();
});

sendBtn.addEventListener('click', ()=>{
  const item = {
    name: document.getElementById('fullname').value.trim() || 'Guest',
    service: document.getElementById('whatservice').value,
    details: document.getElementById('details').value.trim() || '(no details)',
    phone: document.getElementById('phone').value.trim() || '(no phone)',
  };
  openWhatsAppFor(item);
});

function openWhatsAppFor(item){
  const text = `Hello Kplus712!%0A*New request*%0AName: ${encodeURIComponent(item.name)}%0AService: ${encodeURIComponent(item.service)}%0ADetails: ${encodeURIComponent(item.details)}%0APhone: ${encodeURIComponent(item.phone)}%0A`;
  const url = `https://wa.me/255622266932?text=${text}`;
  window.open(url, '_blank');
}

/* queued send */
function sendQueueToWhatsApp(idx){
  const q = getQueue();
  const item = q[idx];
  if(!item) return;
  openWhatsAppFor(item);
  // optional: remove item after opening whatsapp
  q.splice(idx,1); setQueue(q);
}

/* delete */
function deleteQueue(idx){ const q=getQueue(); q.splice(idx,1); setQueue(q); }

/* sync button (just attempts to show queue count and advise user) */
document.getElementById('sync-queued').addEventListener('click', ()=>{
  const q = getQueue();
  if(q.length===0){ alert('No queued requests to sync.'); return; }
  // We cannot auto-send from client — open instruction
  if(confirm(`You have ${q.length} saved request(s). Would you like to open the first in WhatsApp now?`)){
    sendQueueToWhatsApp(0);
  }
});

/* init */
renderQueue();
addMessage('Hi! I am the Kplus712 assistant. Ask me about packages, offline steps, or how to order.','bot');

/* open assistant btn */
document.getElementById('open-assistant').addEventListener('click', ()=>{ document.getElementById('chat-input').focus(); });

/* register service worker for offline cache */
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('sw-kplus.js').then(()=> console.log('SW registered')).catch(()=>console.log('SW failed'));
}
</script>
</body>
</html>
